<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù‚ØµØµ Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡</title>
<style>
body {
  font-family: Arial;
  background: #111;
  color: white;
  text-align: center;
  padding: 20px;
}
.hidden { displayà¦¿à§± none; }
.story span.active {
  background: yellow;
  color: black;
}
button {
  padding: 10px 20px;
  margin: 5px;
  cursor: pointer;
}
</style>
</head>

<body>

<div id="login">
  <h2>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ</h2>
  <button onclick="showName()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div id="nameBox" class="hidden">
  <input id="username" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ">
  <button onclick="welcome()">Ù…ØªØ§Ø¨Ø¹Ø©</button>
</div>

<div id="menu" class="hidden">
  <h3>Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù‚ØµØ© Ø§Ù„ØªÙŠ ØªØ±ÙŠØ¯Ù‡Ø§ØŸ</h3>
  <button onclick="loadStory('isra')">Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡ ÙˆØ§Ù„Ù…Ø¹Ø±Ø§Ø¬</button>
  <button onclick="loadStory('badr')">ØºØ²ÙˆØ© Ø¨Ø¯Ø±</button>
</div>

<div id="storyBox" class="hidden">
  <div id="story" class="story"></div>
  <button onclick="readStory()">ðŸŽ¤ Ø§Ù‚Ø±Ø£ Ø§Ù„Ù‚ØµØ©</button>
</div>

<script>
let voices = speechSynthesis.getVoices();
let words = [];
let index = 0;

function showName(){
  document.getElementById("login").style.display="none";
  document.getElementById("nameBox").style.display="block";
}

function welcome(){
  let name = document.getElementById("username").value;
  let msg = new SpeechSynthesisUtterance("Ø£Ù‡Ù„Ø§ ÙˆØ³Ù‡Ù„Ø§ Ø¨Ùƒ ÙŠØ§ " + name);
  msg.lang = "ar-SA";
  speechSynthesis.speak(msg);
  document.getElementById("nameBox").style.display="none";
  document.getElementById("menu").style.display="block";
}

function loadStory(type){
  let text = "";
  if(type==="isra"){
    text = "Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡ ÙˆØ§Ù„Ù…Ø¹Ø±Ø§Ø¬ ÙƒØ§Ù†Øª Ù…Ø¹Ø¬Ø²Ø© Ø¹Ø¸ÙŠÙ…Ø© Ø£ÙƒØ±Ù… Ø§Ù„Ù„Ù‡ Ø¨Ù‡Ø§ Ù†Ø¨ÙŠÙ‡ Ù…Ø­Ù…Ø¯ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù…...";
  } else {
    text = "ØºØ²ÙˆØ© Ø¨Ø¯Ø± ÙƒØ§Ù†Øª Ø£ÙˆÙ„ Ù…Ø¹Ø±ÙƒØ© ÙØ§ØµÙ„Ø© ÙÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù… ÙˆØ­Ø¯Ø«Øª ÙÙŠ Ø§Ù„Ø³Ù†Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ù‡Ø¬Ø±Ø©...";
  }

  words = text.split(" ");
  let html = words.map(w=>`<span>${w}</span>`).join(" ");
  document.getElementById("story").innerHTML = html;
  document.getElementById("menu").style.display="none";
  document.getElementById("storyBox").style.display="block";
}

function readStory(){
  let spans = document.querySelectorAll("#story span");
  index = 0;

  let utter = new SpeechSynthesisUtterance(words.join(" "));
  utter.lang = "ar-SA";

  utter.onboundary = function(e){
    if(e.name === "word"){
      spans.forEach(s=>s.classList.remove("active"));
      if(spans[index]) spans[index].classList.add("active");
      index++;
    }
  };

  speechSynthesis.speak(utter);
}
</script>

</body>
</html>
